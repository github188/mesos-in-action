# 7.2 持续集成介绍

持续集成的概念已经在概述中进行了简单介绍，鉴于本书以实战为主，这里对持续集成的概念不再进一步讨论，感兴趣的朋友可以网上搜索几篇博客学习下。

本章主要结合实践经验介绍持续集成涉及到的主要工具以及持续集成的大致流程。

## 持续集成涉及到的主要工具

* 版本控制/配置管理工具
> 版本控制与配置管理工具主要负责源代码，配置文件的管理。常见的工具如 git，svn 等， 其中 git 是当下最流行的版本控制工具。

* 构建工具
> 实现主要负责自动化地编译、测试、部署等，这是持续集成的核心工具；构建工具是编程语言依赖型的，不同编程语言使用不同的构建工具。

* CI 服务器
> CI 服务器主要负责将版本控制仓库和构建工具有机整合起来，并通过设置一种或多种构建触发条件来触发构建。常见的CI工具有
>> * [jenkins](http://jenkins-ci.org/)
>> * [travis](https://travis-ci.com/)
>> * [codeship](https://codeship.com/)
>> * [stridercd]( http://stridercd.com)

## 持续集成的流程

关于CI的流程，首先我们需要明确的是，基于不同的项目规模，不同的项目阶段，不同的团队大小以及不同的团队经验，CI 的流程是相应调整的。CI 流程本身也是一个逐步迭代，逐步完善的过程。

下面列出的是一个基本的，泛化的持续集成过程：

* 团队开发人员频繁的从源代码仓库下载同步代码
* 团队开发编写代码、测试用例，并提交更新结果给版本控制仓库
* CI服务器根据触发条件，从版本控制仓库提取最新代码，交给构建工具的工作空间
* 构建工具对代码进行编译、测试，并进行打包。
* 通过构建工具与版本控制工具的配合，实现产品版本控制与管理
* 建立、管理项目开发的工作网站

另外下面的图片是我在[atlassian wiki](https://chrisshayan.atlassian.net/wiki/display/my/2013/07/23/Continuous+Delivery+Matrix)下载的持续交付成熟度矩阵。这里我们不需要要考虑持续集成与持续交付的差别，或者说，在本文中，持续集成与持续交付是一样的。

![持续交付成熟度矩阵](ContinuousDeliveryMatrix.png)

通过这张图片我们可以看出，CI流程的演进过程，从初期的 nightly build 到最终的 镜像交付； 从 merges are rare 到自动生成 ReleaseNote；从简单的将构建结果通知 committer 到向客户分享构建报告与统计结果，等等。我们可以发现，一个成熟的继续交付系统可以极大的提高生产率。